@model SN.Models.MessagesModel
@{
    ViewBag.Title = "Messages";
}

    <link rel="stylesheet" href="~/css/bootstrap.css">
    <script src="~/js/bootstrap.min.js" type="text/javascript"></script>
    <script src="~/Scripts/Messages.js" type="text/javascript"></script>
    <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title class="title">
            Messages
        </title>   
        <link rel="stylesheet" type="text/css" href="~/css/messages.css">
    </head>

@using (Html.BeginForm(Model)) {
           @Html.ValidationSummary(true)
    
        <fieldset>
            <legend>MessagesModel</legend>
    @if(ViewBag.Count > 0)
    {
        <div class="container-fluid" style="background-color:#e8e8e8">
        <div class="container container-pad" id="property-listings">
            
            <div class="row">
              <div class="col-md-12">
                <h1>The dialogue with @Html.ActionLink(ViewBag.username as string, "ViewProfile", "Profile",   new { username = @ViewBag.username }, null)</h1>
                   <ul class="list-inline mrg-0 btm-mrg-10 clr-535353">
                       <li>@Html.ActionLink(("Click here to send message to "+ @ViewBag.With) as string, "SendMessage", "Messages",   new { username = @ViewBag.With }, null)</li>
                   </ul>
              </div>
            </div>
            <div class="row">
                <div class="col-xs-12 col-sm-6 col-md-8"> 
                    <div class="brdr bgc-fff pad-10 box-shad btm-mrg-20 property-listing">
                        <div class="media">
                        @for (int i = ViewBag.Count -1; i >=0; i -- )
                            {
                                <div class="row">
                                    <div class="col-xs-6 col-sm-6 col-md-4">
                                        <a class="pull-left">
                                        <img alt="image" class="img-responsive" src="@Url.Content(ViewBag.Photo[i] as string)" width=50></a>
                                    </div>
                                    <div class="col-xs-12 col-sm-6 col-md-8">
                                        <p class="hidden-xs"><strong>
                                            @ViewBag.Text[i]</strong>
                                        </p>
                                    </div>
                                </div>
                                <div class="clearfix visible-sm"></div>
                                <div class="media-body fnt-smaller">
                                    <div class="row">
                                        <div class="col-sm-5 col-sm-offset-2 col-md-6 col-md-offset-0">
                                            <h4 class="media-heading">
                                                <a>@Html.ActionLink(ViewBag.From[i] as string, "ViewProfile", "Profile",   new { username = @ViewBag.From[i] }, null)</a>
                                            </h4>
                                        </div>
                                    </div>                                                                                                                     
                                    <div class="row">
                                        <div class="col-sm-5 col-md-6"> 
                                        </div>
                                        <div class="col-sm-5 col-sm-offset-2 col-md-6 col-md-offset-0">
                                            <small class="pull-right">@ViewBag.Date[i]</small>
                                        </div>
                                    </div>
                                </div>
                            }
                        </div>
                    </div>
                </div>
            </div>
        </div>
        </div>                                
}
        </fieldset>
}
